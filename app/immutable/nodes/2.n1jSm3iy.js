import{a as K,t as Y}from"../chunks/disclose-version.C_LNC0YU.js";import{T as te,ap as me,aq as ke,y as oe,ar as xe,as as be,ak as Ee,p as re,ao as P,a as he,t as se,i as ae,q as d,g as a,f as Ne,s as E,j as M,k as V,h as ne,at as Re,au as we,av as G,aw as j}from"../chunks/runtime.C62SmBE5.js";import{d as Ae,a as U}from"../chunks/store.BegEmyLu.js";import{p as z,a as N}from"../chunks/props.D1BuS8Sn.js";import{i as Pe}from"../chunks/lifecycle.BJfOM64V.js";let ue=!1;function ve(){ue||(ue=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function Le(e){if(te){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var n=e.value;$(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var s=e.checked;$(e,"checked",null),e.checked=s}}};e.__on_r=r,me(r),ve()}}function $(e,t,r,n){var s=e.__attributes??(e.__attributes={});te&&(s[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||s[t]!==(s[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[ke]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Me(e).includes(t)?e[t]=r:e.setAttribute(t,r))}var fe=new Map;function Me(e){var t=fe.get(e.nodeName);if(t)return t;fe.set(e.nodeName,t=[]);for(var r,n=oe(e),s=Element.prototype;s!==n;){r=xe(n);for(var i in r)r[i].set&&t.push(i);n=oe(n)}return t}function Q(e,t,r){if(r){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function Ve(e,t,r,n=r){e.addEventListener(t,r);const s=e.__on_r;s?e.__on_r=()=>{s(),n()}:e.__on_r=n,ve()}function Oe(e,t,r=t){var n=be();Ve(e,"input",()=>{var s=ce(e)?pe(e.value):e.value;r(s),n&&s!==(s=t())&&(e.value=s??"")}),Ee(()=>{var s=t();if(te&&e.defaultValue!==e.value){r(e.value);return}ce(e)&&s===pe(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function ce(e){var t=e.type;return t==="number"||t==="range"}function pe(e){return e===""?null:+e}const ee="LPAREN",ge="RPAREN",W="PLUS",F="PARALLEL",O="NUMBER",q="TIMES",C="DIVIDE",Te="DONE";class Ie{get_next_token(){return this.tokens.shift()}constructor(t){this.tokens=t,this.current_token=this.get_next_token()}error(){console.error("Parsing errror",this.current_token)}eat(t){this.current_token.type==t?this.current_token=this.get_next_token():this.error()}factor(){let t=this.current_token;if(t.type==O)return this.eat(O),t;if(t.type==ee){this.eat(ee);let r=this.expr();return this.eat(ge),r}}term(){let t=this.factor();for(;[F,q,C].includes(this.current_token.type);){let r=this.current_token;r.type==F?this.eat(F):r.type==q?this.eat(q):r.type==C&&this.eat(C),t={left:t,op:r,right:this.factor()}}return t}expr(){let t=this.term();for(;[W].includes(this.current_token.type);){let r=this.current_token;r.type==W&&this.eat(W),t={left:t,op:r,right:this.term()}}return t}parse(){return this.expr()}}function de(e,t){return 1/(1/e+1/t)}const T=[{value:1e-15,symbol:"f",name:"Femto"},{value:1e-12,symbol:"p",name:"Pico"},{value:1e-9,symbol:"n",name:"Nano"},{value:1e-6,symbol:"u",name:"Micro"},{value:.001,symbol:"m",name:"Milli"},{value:1,symbol:"",name:""},{value:1e3,symbol:"k",name:"Kilo"},{value:1e6,symbol:"M",name:"Mega"},{value:1e9,symbol:"G",name:"Giga"},{value:1e12,symbol:"T",name:"Tera"}];function X(e){let t=parseFloat(e),r="eE";if(r.includes(e))throw new Error("Missing Base");if(r.includes(e.charAt(e.length-1)))throw new Error("Missing Exponent");return T.forEach(n=>{e.charAt(e.length-1).includes(n.symbol)&&(t*=n.value)}),t}function ye(e,t="resistance"){if(e=e+"",e=="")return;let r=[];function n(l){let o;if([["|",F],["(",ee],[")",ge],["+",W],["*",q],["/",C]].forEach(u=>{u[0]===l&&(o=u[1])}),o===void 0)throw new Error('"'+l+'" not valid');return o}let s=!1,i="",c="0123456789.-";c+="eE",T.forEach(l=>{c+=l.symbol});for(let l in e){let o=e[l];if(o===" ")continue;let g=c.includes(o);g&&(i+=o),s=i.length>0,!g&&s?(r.push({token:i,type:O}),i="",s=!1,r.push({token:o,type:n(o)})):g||r.push({token:o,type:n(o)})}if(s&&r.push({token:i,type:O}),r.push({type:Te}),r.length==2&&r[0].type==O)return X(r[0].token);let y=new Ie(r).parse();function m(l){let o;if(l.left===void 0||l.right===void 0)throw new Error("Incomplete expression");l.left.type==O?o=X(l.left.token):o=m(l.left);let g;if(l.right.type==O?g=X(l.right.token):g=m(l.right),l.op.type==F)return t==="resistance"?de(o,g):o+g;if(l.op.type==W)return t==="resistance"?o+g:de(o,g);if(l.op.type==q)return o*g;if(l.op.type==C)return o/g;console.info("You should not be here!",l.op.type,l.op.type==F)}let _="Parsing Error";try{_=m(y)}catch(l){return console.error("PARSING ERROR"),console.log(l),console.log(JSON.stringify(y)),"Parsing error: "+l.message}return _}let Se=[{exp:"(1+1)",assert:2},{exp:"(100+100+100)",assert:300},{exp:"1",assert:1},{exp:"1|1",assert:.5},{exp:"1|1|1|1",assert:.25},{exp:"1|1|1|1+1",assert:1.25},{exp:"1|1|(0.5+1|1)|1+1",assert:1.25},{exp:"1k*2k",assert:1e3*2e3},{exp:"3*7k+1",assert:3*7e3+1},{exp:"2+3*7k+1",assert:2+3*7e3+1},{exp:"2+3*7k+1|1",assert:2+3*7e3+.5},{exp:"(1|1)",assert:.5},{exp:"(1|1)*2",assert:1},{exp:"2*(1|1)",assert:1},{exp:"1+2*(1|1)",assert:2},{exp:"10+2*2+(1|1)",assert:10+2*2+.5},{exp:"7*3",assert:7*3},{exp:"7*3/2",assert:7*3/2},{exp:"7/11*3/2",assert:7/11*3/2},{exp:"7/11*3/2+1",assert:7/11*3/2+1},{exp:"(7/11*3/2+1)/5",assert:(7/11*3/2+1)/5}],Z=!0;Se.forEach(e=>{let t=ye(e.exp);t!=e.assert&&(console.error("Test failed!!"),console.log("Test:",JSON.stringify(e),"Result:",t,"Expected",e.assert),Z=!1)});Z&&console.log("All tests passed!");function b(e){if(isNaN(e))return console.log("Not a number"),e;if(!isFinite(e))return console.log("Infinite number"),e;let t=!1,r=T[0];if(!(e<r.value))for(let s=0;s<T.length;s++){let i=T[s];if(s==T.length-1)break;let c=T[s+1].value;e<c&&!t&&(r=i,t=!0)}let n=e;if(t){n=e/r.value;let s=1e3;return n=Math.round(n*s)/s,n+""+r.symbol}else return parseFloat(n).toPrecision(3)}let _e=[{n:1,assert:"1"},{n:1e3,assert:"1k"},{n:1e6,assert:"1M"},{n:1e9,assert:"1G"},{n:1e12,assert:"1.00e+12"},{n:1e15,assert:"1.00e+15"},{n:13123123123123122e-1,assert:"1.31e+15"},{n:0x4f9494ccaafb3,assert:"1.40e+15"},{n:1/3,assert:"333.333m"},{n:.001,assert:"1m"},{n:1e-6,assert:"1u"},{n:1e-9,assert:"1n"},{n:1e-12,assert:"1p"},{n:1e-15,assert:"1f"},{n:1e-18,assert:"1.00e-18"},{n:1001,assert:"1.001k"},{n:.001,assert:"1m"},{n:1e-6,assert:"1u"},{n:1e-9,assert:"1n"},{n:1e-12,assert:"1p"},{n:1e-15,assert:"1f"},{n:1e-18,assert:"1.00e-18"},{n:13123123123123122e-31,assert:"1.312f"},{n:13999931231231231e-31,assert:"1.4f"},{n:.001/3,assert:"333.333u"}];Z=!0;for(let e=0;e<_e.length;e++){let t=_e[e],r=b(t.n);if(r!=t.assert){console.error("Test failed!!"),console.log("Test:",t,"Result:",r,"Expected",t.assert),Z=!1;break}}Z?console.log("All stringify tests passed!"):console.error("Test failed");function Fe(e,t,r,n,s,i,c,v){d(t,"");let y=e.target.value;if(d(r,N((y===""||y===void 0)&&!a(n))),a(r)){s(void 0),d(i,!1);return}try{s(ye(y,"resistance")),d(i,!1)}catch(_){d(i,!0),console.log("Setting error flag"),s(_.message)}function m(_){if(_===void 0)return"";if(typeof _=="string")return d(i,!0),_;if(isNaN(_))return d(i,!0),"Not a number";if(_===0&&!c())return d(i,!0),"Zero not valid";if(!isFinite(_))return d(i,!0),"Infinity";let l=b(_);return d(i,!1),"["+l+v.unit+"]"}d(t,N(m(s())))}var De=Y('<div class="frame svelte-1psfcck"><div class="input_div_with_columns svelte-1psfcck"><label class="svelte-1psfcck"> </label> <input type="text" class="svelte-1psfcck"> <label class="svelte-1psfcck"> </label> <br class="svelte-1psfcck"> <div class="svelte-1psfcck"> </div></div></div>');function I(e,t){re(t,!0);let r=z(t,"value",15),n=z(t,"resultsSideDisplayValue",7),s=z(t,"allowZeros",3,!1),i=P(!0),c=P(!1),v=P(""),y=P(N({}));he(()=>{d(y,N(t.data[t.key]))});let m=Ne(()=>{var h,w;return(w=(h=a(y))==null?void 0:h.placeholder)==null?void 0:w.includes("=")});var _=De(),l=M(_),o=M(l),g=M(o,!0);V(o);var u=E(o,2);Le(u),u.__input=[Fe,v,i,m,n,c,s,t];var R=E(u,2),f=M(R,!0);V(R);var k=E(R,4),p=M(k,!0);V(k),V(l),V(_),se(()=>{var h,w,x;U(g,(h=a(y))==null?void 0:h.name),u.readOnly=a(m),$(u,"placeholder",(w=a(y))==null?void 0:w.placeholder),Q(u,"error",a(c)),Q(u,"emptyInput",a(i)),Q(u,"showing_result",a(m)),U(f,(x=a(y))==null?void 0:x.extra),U(p,a(v))}),Oe(u,r),K(e,_),ae()}Ae(["input"]);var Je=Y("<h3> </h3> <!> <!> <!> <!>",1);function Be(e,t){re(t,!0);let r=P(void 0),n=P(void 0),s=P(void 0),i=P(void 0),c=P(0),v=P(N({}));function y(f,k,p,h){let w=JSON.stringify({vin:{placeholder:"V input",extra:"",name:"Vin"},rhigh:{placeholder:"R Highside",extra:"",name:"Rhigh"},rlow:{placeholder:"10|4+2",name:"R Lowside"},vout:{placeholder:"V output",extra:"",name:"Vout"}});function x(H){return H!=null&&!isNaN(H)}let A=0;if(x(f)&&(A+=1),x(k)&&(A+=1),x(p)&&(A+=1),x(h)&&(A+=1),console.log("Okays",A),A<3)return d(v,N(JSON.parse(w))),"Please fill in tree fields";if(A==4)return"Please leave one field empty";let S=f,L=h,D=k,J=p;x(f)||(S=h*(k+p)/p,a(v).vin.placeholder="="+b(S)+"V"),x(h)||(console.log("Vin",f),console.log("Rlow",p),console.log("Rhigh",k,f*p,k+p,f*p/(k+p)),L=f*p/(k+p),console.log("Vout",L),a(v).vout.placeholder="="+b(L)+"V"),x(k)||(D=(f-h)*p/h,a(v).rhigh.placeholder="="+b(D)+"立"),x(p)||(J=h*k/(f-h),a(v).rlow.placeholder="="+b(J)+"立");let B=S-L,le=B*B/(J+D);B=L;let ie=B*B/(J+D);a(v).vin.extra=b(le+ie)+"W",a(v).vin.extra+=", "+b(S/(D+J))+"A",a(v).rhigh.extra=b(le)+"W",a(v).rlow.extra=b(ie)+"W"}he(()=>{let f=parseFloat(a(r)),k=parseFloat(a(n)),p=parseFloat(a(s)),h=parseFloat(a(i));setTimeout(()=>{d(c,N(y(f,h,p,k)))},1)});var m=Je(),_=ne(m),l=M(_);V(_);var o=E(_,2);I(o,{get value(){return a(r)},set value(f){d(r,N(f))},get data(){return a(v)},key:"vin",unit:"V"});var g=E(o,2);I(g,{get value(){return a(i)},set value(f){d(i,N(f))},get data(){return a(v)},key:"rhigh",unit:"立"});var u=E(g,2);I(u,{get value(){return a(s)},set value(f){d(s,N(f))},get data(){return a(v)},key:"rlow",unit:"立"});var R=E(u,2);I(R,{get value(){return a(n)},set value(f){d(n,N(f))},get data(){return a(v)},key:"vout",unit:"V"}),se(()=>U(l,`Message:${a(c)??""}`)),K(e,m),ae()}var Ge=Y("<h3> </h3> <!> <!> <!>",1);function Ue(e,t){re(t,!1);const r=G();let n=G(),s=G(),i=G(),c=G({});function v(u,R,f){let k=JSON.stringify({voltage:{placeholder:"Voltage",extra:"",name:"Voltage"},resistance:{placeholder:"Resistance",extra:"",name:"Resistance"},current:{placeholder:"Current",extra:"",name:"Current"}});function p(L){return L!=null&&L!==""}let h=0;if(p(R)&&(h+=1),p(f)&&(h+=1),p(u)&&(h+=1),h<2)return d(c,JSON.parse(k)),"Please fill in two fields";if(h==3)return"Please leave one field empty";let w=0,x=0,A=0;p(u)||(x=R*f,j(c,a(c).voltage.placeholder="="+b(x)+"V")),p(R)||(w=u/f,j(c,a(c).resistance.placeholder="="+b(w)+"立")),p(f)||(A=u/R,j(c,a(c).current.placeholder="="+b(A)+"A"));let S=u*f;j(c,a(c).voltage.extra=b(S)+"W")}Re(()=>(a(n),a(i),a(s)),()=>{d(r,v(a(n),a(i),a(s)))}),we(),Pe();var y=Ge(),m=ne(y),_=M(m);V(m);var l=E(m,2);I(l,{get value(){return a(n)},set value(u){d(n,u)},get data(){return a(c)},key:"voltage",unit:"V",$$legacy:!0});var o=E(l,2);I(o,{get value(){return a(s)},set value(u){d(s,u)},get data(){return a(c)},key:"current",unit:"A",$$legacy:!0});var g=E(o,2);I(g,{get value(){return a(i)},set value(u){d(i,u)},get data(){return a(c)},key:"resistance",unit:"立",$$legacy:!0}),se(()=>U(_,`Message:${a(r)??""}`)),K(e,y),ae()}var We=Y("<h1>OBS This is a draft...</h1> <h2>Voltage Divider</h2> <!> <h2>Ohms Law</h2> <!>",1);function Ye(e){var t=We(),r=E(ne(t),4);Be(r,{});var n=E(r,4);Ue(n,{}),K(e,t)}export{Ye as component};
