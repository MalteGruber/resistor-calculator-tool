import{a as Q,t as X}from"../chunks/disclose-version.ComvGMdf.js";import{T as re,y as fe,af as me,p as ae,ag as T,a as de,t as le,i as ne,q as _,g as s,f as xe,s as A,j as I,k as S,h as ie,ah as ke,ai as we,aj as B,ak as Y}from"../chunks/runtime.CCCDxa2g.js";import{d as Ne,a as G}from"../chunks/store.DLviFcqc.js";import{p as ee,a as b}from"../chunks/props.DKjzyiyI.js";import{i as Ee}from"../chunks/lifecycle.jKPqS4fv.js";function be(t,e,r,l){var n=t.__attributes??(t.__attributes={});re&&(n[e]=t.getAttribute(e)),n[e]!==(n[e]=r)&&(r==null?t.removeAttribute(e):typeof r!="string"&&Ae(t).includes(e)?t[e]=r:t.setAttribute(e,r))}var ce=new Map;function Ae(t){var e=ce.get(t.nodeName);if(e)return e;ce.set(t.nodeName,e=[]);for(var r,l=fe(t),n=Element.prototype;n!==l;){r=me(l);for(var i in r)r[i].set&&e.push(i);l=fe(l)}return e}function Pe(t,e){var r=t.__className,l=Me(e);re&&t.className===l?t.__className=l:(r!==l||re&&t.className!==l)&&(e==null?t.removeAttribute("class"):t.className=l,t.__className=l)}function Me(t){return t??""}function pe(t,e,r){if(r){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}const se="LPAREN",ge="RPAREN",W="PLUS",D="PARALLEL",F="NUMBER",C="TIMES",Z="DIVIDE",Oe="DONE";class ze{get_next_token(){return this.tokens.shift()}constructor(e){this.tokens=e,this.current_token=this.get_next_token()}error(){console.error("Parsing errror",this.current_token)}eat(e){this.current_token.type==e?this.current_token=this.get_next_token():this.error()}factor(){let e=this.current_token;if(e.type==F)return this.eat(F),e;if(e.type==se){this.eat(se);let r=this.expr();return this.eat(ge),r}}term(){let e=this.factor();for(;[D,C,Z].includes(this.current_token.type);){let r=this.current_token;r.type==D?this.eat(D):r.type==C?this.eat(C):r.type==Z&&this.eat(Z),e={left:e,op:r,right:this.factor()}}return e}expr(){let e=this.term();for(;[W].includes(this.current_token.type);){let r=this.current_token;r.type==W&&this.eat(W),e={left:e,op:r,right:this.term()}}return e}parse(){return this.expr()}}function he(t,e){return 1/(1/t+1/e)}const L=[{value:1e-15,symbol:"f",name:"Femto"},{value:1e-12,symbol:"p",name:"Pico"},{value:1e-9,symbol:"n",name:"Nano"},{value:1e-6,symbol:"u",name:"Micro"},{value:.001,symbol:"m",name:"Milli"},{value:1,symbol:"",name:""},{value:1e3,symbol:"k",name:"Kilo"},{value:1e6,symbol:"M",name:"Mega"},{value:1e9,symbol:"G",name:"Giga"},{value:1e12,symbol:"T",name:"Tera"}];function te(t){let e=parseFloat(t),r="eE";if(r.includes(t))throw new Error("Missing Base");if(r.includes(t.charAt(t.length-1)))throw new Error("Missing Exponent");return L.forEach(l=>{t.charAt(t.length-1).includes(l.symbol)&&(e*=l.value)}),e}function ve(t,e="resistance"){if(t=t+"",t=="")return;let r=[];function l(a){let o;if([["|",D],["(",se],[")",ge],["+",W],["*",C],["/",Z]].forEach(x=>{x[0]===a&&(o=x[1])}),o===void 0)throw new Error('"'+a+'" not valid');return o}let n=!1,i="",p="0123456789.-";p+="eE",L.forEach(a=>{p+=a.symbol});for(let a in t){let o=t[a];if(o===" ")continue;let g=p.includes(o);g&&(i+=o),n=i.length>0,!g&&n?(r.push({token:i,type:F}),i="",n=!1,r.push({token:o,type:l(o)})):g||r.push({token:o,type:l(o)})}if(n&&r.push({token:i,type:F}),r.push({type:Oe}),r.length==2&&r[0].type==F)return te(r[0].token);let m=new ze(r).parse();function y(a){let o;if(a.left===void 0||a.right===void 0)throw new Error("Incomplete expression");a.left.type==F?o=te(a.left.token):o=y(a.left);let g;if(a.right.type==F?g=te(a.right.token):g=y(a.right),a.op.type==D)return e==="resistance"?he(o,g):o+g;if(a.op.type==W)return e==="resistance"?o+g:he(o,g);if(a.op.type==C)return o*g;if(a.op.type==Z)return o/g;console.info("You should not be here!",a.op.type,a.op.type==D)}let P="Parsing Error";try{P=y(m)}catch(a){return console.error("PARSING ERROR"),console.log(a),console.log(JSON.stringify(m)),"Parsing error: "+a.message}return P}let Te=[{exp:"(1+1)",assert:2},{exp:"(100+100+100)",assert:300},{exp:"1",assert:1},{exp:"1|1",assert:.5},{exp:"1|1|1|1",assert:.25},{exp:"1|1|1|1+1",assert:1.25},{exp:"1|1|(0.5+1|1)|1+1",assert:1.25},{exp:"1k*2k",assert:1e3*2e3},{exp:"3*7k+1",assert:3*7e3+1},{exp:"2+3*7k+1",assert:2+3*7e3+1},{exp:"2+3*7k+1|1",assert:2+3*7e3+.5},{exp:"(1|1)",assert:.5},{exp:"(1|1)*2",assert:1},{exp:"2*(1|1)",assert:1},{exp:"1+2*(1|1)",assert:2},{exp:"10+2*2+(1|1)",assert:10+2*2+.5},{exp:"7*3",assert:7*3},{exp:"7*3/2",assert:7*3/2},{exp:"7/11*3/2",assert:7/11*3/2},{exp:"7/11*3/2+1",assert:7/11*3/2+1},{exp:"(7/11*3/2+1)/5",assert:(7/11*3/2+1)/5}],q=!0;Te.forEach(t=>{let e=ve(t.exp);e!=t.assert&&(console.error("Test failed!!"),console.log("Test:",JSON.stringify(t),"Result:",e,"Expected",t.assert),q=!1)});q&&console.log("All tests passed!");function E(t){if(isNaN(t))return console.log("Not a number"),t;if(!isFinite(t))return console.log("Infinite number"),t;let e=!1,r=L[0];if(!(t<r.value))for(let n=0;n<L.length;n++){let i=L[n];if(n==L.length-1)break;let p=L[n+1].value;t<p&&!e&&(r=i,e=!0)}let l=t;if(e){l=t/r.value;let n=1e3;return l=Math.round(l*n)/n,l+""+r.symbol}else return parseFloat(l).toPrecision(3)}let _e=[{n:1,assert:"1"},{n:1e3,assert:"1k"},{n:1e6,assert:"1M"},{n:1e9,assert:"1G"},{n:1e12,assert:"1.00e+12"},{n:1e15,assert:"1.00e+15"},{n:13123123123123122e-1,assert:"1.31e+15"},{n:0x4f9494ccaafb3,assert:"1.40e+15"},{n:1/3,assert:"333.333m"},{n:.001,assert:"1m"},{n:1e-6,assert:"1u"},{n:1e-9,assert:"1n"},{n:1e-12,assert:"1p"},{n:1e-15,assert:"1f"},{n:1e-18,assert:"1.00e-18"},{n:1001,assert:"1.001k"},{n:.001,assert:"1m"},{n:1e-6,assert:"1u"},{n:1e-9,assert:"1n"},{n:1e-12,assert:"1p"},{n:1e-15,assert:"1f"},{n:1e-18,assert:"1.00e-18"},{n:13123123123123122e-31,assert:"1.312f"},{n:13999931231231231e-31,assert:"1.4f"},{n:.001/3,assert:"333.333u"}];q=!0;for(let t=0;t<_e.length;t++){let e=_e[t],r=E(e.n);if(r!=e.assert){console.error("Test failed!!"),console.log("Test:",e,"Result:",r,"Expected",e.assert),q=!1;break}}q?console.log("All stringify tests passed!"):console.error("Test failed");function Ie(t,e,r,l,n,i,p,d,m){_(e,"");let y=t.target.value;if(_(r,b((y===""||y===void 0)&&!s(l))),s(r)){n(void 0),_(i,!1),p(void 0);return}try{n(ve(y,"resistance")),_(i,!1),p(n())}catch(a){_(i,!0),console.log("Setting error flag"),n(a.message)}function P(a){if(a===void 0)return"";if(typeof a=="string")return _(i,!0),a;if(isNaN(a))return _(i,!0),"Not a number";if(a===0&&!d())return _(i,!0),"Zero not valid";if(!isFinite(a))return _(i,!0),"Infinity";let o=E(a);return _(i,!1),"["+o+m.unit+"]"}_(e,b(P(n())))}var Se=X('<div class="frame svelte-zza4ss"><div class="input_div_with_columns svelte-zza4ss"><label class="svelte-zza4ss"> </label> <input type="text"> <label class="svelte-zza4ss"> </label> <br class="svelte-zza4ss"> <div class="svelte-zza4ss"> </div></div></div>');function J(t,e){ae(e,!0);let r=ee(e,"value",15),l=ee(e,"resultsSideDisplayValue",7),n=ee(e,"allowZeros",3,!1),i=T(!0),p=T(!1),d=T(""),m=T(b({}));de(()=>{_(m,b(e.data[e.key]))});let y=xe(()=>{var h,v;return(v=(h=s(m))==null?void 0:h.placeholder)==null?void 0:v.includes("=")});function P(h){r(h)}var a=Se(),o=I(a),g=I(o),x=I(g,!0);S(g);var w=A(g,2);w.__input=[Ie,d,i,y,l,p,P,n,e];var M=A(w,2),u=I(M,!0);S(M);var c=A(M,4),f=I(c,!0);S(c),S(o),S(a),le(()=>{var h,v,N;G(x,(h=s(m))==null?void 0:h.name),w.readOnly=s(y),Pe(w,`${(s(y)?"showing_result":"")??""} svelte-zza4ss`),be(w,"placeholder",(v=s(m))==null?void 0:v.placeholder),pe(w,"error",s(p)),pe(w,"emptyInput",s(i)),G(u,(N=s(m))==null?void 0:N.extra),G(f,s(d))}),Q(t,a),ne()}Ne(["input"]);var Fe=X("<h3> </h3> <!> <!> <!> <!>",1);function Le(t,e){ae(e,!0);let r=T(void 0),l=T(void 0),n=T(void 0),i=T(void 0),p=T(0),d=T(b({}));function m(u,c,f,h,v){let N=JSON.stringify({vin:{placeholder:"V input",extra:"",name:"Vin"},rhigh:{placeholder:"R Highside",extra:"",name:"Rhigh"},rlow:{placeholder:"10|4+2",name:"R Lowside"},vout:{placeholder:"V output",extra:"",name:"Vout"}});_(d,b(JSON.parse(N)));function k(z){return z!=null&&!isNaN(z)}let O=0;if(k(u)&&(O+=1),k(c)&&(O+=1),k(f)&&(O+=1),k(h)&&(O+=1),console.log("Args",O),O<3)return _(d,b(JSON.parse(N))),"Please fill in three fields";if(O==4)return"Please leave one field empty";let U=u,$=h,V=c,R=f;k(u)||(U=h*(c+f)/f,s(d).vin.placeholder="="+E(U)+"V"),k(h)||($=u*f/(c+f),s(d).vout.placeholder="="+E($)+"V"),k(c)||(V=(u-h)*f/h,s(d).rhigh.placeholder="="+E(V)+"立"),k(f)||(R=h*c/(u-h),s(d).rlow.placeholder="="+E(R)+"立");let K=U/(V+R),j=K*K*V,H=K*K*R;if(v){let z=function(oe,ue,ye){Math.abs(oe-ue)>1e-6&&console.error("Assert failed",oe,ue,ye)};z(j,v.phihg,"phihg"),z(H,v.plow,"plow"),z(U,v.result_vin,"result_vin"),z($,v.result_vout,"result_vout"),z(V,v.result_rhigh,"result_rhigh"),z(R,v.result_rlow,"result_rlow")}s(d).vin.extra=E(j+H)+"W",s(d).vin.extra+=", "+E(U/(V+R))+"A",s(d).rhigh.extra=E(j)+"W",s(d).rlow.extra=E(H)+"W"}function y(u,c,f){let h=u/(c+f),v=h*h*f,N=h*h*c,k=h*f;m(u,c,f,void 0,{phihg:N,plow:v,result_vin:u,result_vout:k,result_rhigh:c,result_rlow:f}),m(u,c,void 0,k,{phihg:N,plow:v,result_vin:u,result_vout:k,result_rhigh:c,result_rlow:f}),m(u,void 0,f,k,{phihg:N,plow:v,result_vin:u,result_vout:k,result_rhigh:c,result_rlow:f}),m(void 0,c,f,k,{phihg:N,plow:v,result_vin:u,result_vout:k,result_rhigh:c,result_rlow:f})}y(1,2,3),y(3,2,1),y(100,3.3,2),y(100,2,3.3),y(100,3.3,3.3),de(()=>{let u=parseFloat(s(r)),c=parseFloat(s(l)),f=parseFloat(s(n)),h=parseFloat(s(i));setTimeout(()=>{_(p,b(m(u,h,f,c)))},1)});var P=Fe(),a=ie(P),o=I(a);S(a);var g=A(a,2);J(g,{get value(){return s(r)},set value(u){_(r,b(u))},get data(){return s(d)},key:"vin",unit:"V"});var x=A(g,2);J(x,{get value(){return s(i)},set value(u){_(i,b(u))},get data(){return s(d)},key:"rhigh",unit:"立"});var w=A(x,2);J(w,{get value(){return s(n)},set value(u){_(n,b(u))},get data(){return s(d)},key:"rlow",unit:"立"});var M=A(w,2);J(M,{get value(){return s(l)},set value(u){_(l,b(u))},get data(){return s(d)},key:"vout",unit:"V"}),le(()=>G(o,`Message:${s(p)??""}`)),Q(t,P),ne()}var Je=X("<h3> </h3> <!> <!> <!>",1);function Ve(t,e){ae(e,!1);const r=B();let l=B(),n=B(),i=B(),p=B({});function d(x,w,M){let u=JSON.stringify({voltage:{placeholder:"Voltage",extra:"",name:"Voltage"},resistance:{placeholder:"Resistance",extra:"",name:"Resistance"},current:{placeholder:"Current",extra:"",name:"Current"}});function c(O){return O!=null&&O!==""}let f=0;if(c(w)&&(f+=1),c(M)&&(f+=1),c(x)&&(f+=1),f<2)return _(p,JSON.parse(u)),"Please fill in two fields";if(f==3)return"Please leave one field empty";let h=w,v=x,N=M;c(x)||(v=w*M,Y(p,s(p).voltage.placeholder="="+E(v)+"V")),c(w)||(h=x/M,Y(p,s(p).resistance.placeholder="="+E(h)+"立")),c(M)||(N=x/w,Y(p,s(p).current.placeholder="="+E(N)+"A"));let k=N*v;Y(p,s(p).voltage.extra=E(k)+"W")}ke(()=>(s(l),s(i),s(n)),()=>{_(r,d(s(l),s(i),s(n)))}),we(),Ee();var m=Je(),y=ie(m),P=I(y);S(y);var a=A(y,2);J(a,{get value(){return s(l)},set value(x){_(l,x)},get data(){return s(p)},key:"voltage",unit:"V",$$legacy:!0});var o=A(a,2);J(o,{get value(){return s(n)},set value(x){_(n,x)},get data(){return s(p)},key:"current",unit:"A",$$legacy:!0});var g=A(o,2);J(g,{get value(){return s(i)},set value(x){_(i,x)},get data(){return s(p)},key:"resistance",unit:"立",$$legacy:!0}),le(()=>G(P,`Message:${s(r)??""}`)),Q(t,m),ne()}var Re=X("<h1>OBS This is a draft...</h1> <h2>Voltage Divider</h2> <!> <h2>Ohms Law</h2> <!>",1);function Ce(t){var e=Re(),r=A(ie(e),4);Le(r,{});var l=A(r,4);Ve(l,{}),Q(t,e)}export{Ce as component};
